{% extends "base.html" %}
{% block title %}Rules â€” Hermes TV{% endblock %}
{% block content %}
<h2>Rules & Settings</h2>

<article>
<form method="post" action="{{ base }}/admin/rules">
    <div class="grid">
        <label>
            Break interval (minutes)
            <input type="number" name="break_interval_minutes" value="{{ settings.get('break_interval_minutes', '15') }}" min="1" max="120">
        </label>
        <label>
            Cooldown (seconds)
            <input type="number" name="cooldown_seconds" value="{{ settings.get('cooldown_seconds', '120') }}" min="0">
        </label>
        <label>
            Break timeout (seconds)
            <input type="number" name="break_timeout_seconds" value="{{ settings.get('break_timeout_seconds', '30') }}" min="10" max="120">
        </label>
    </div>

    <div class="grid">
        <label>
            Breaking score threshold
            <input type="number" name="breaking_score_threshold" value="{{ settings.get('breaking_score_threshold', '8') }}" min="1" max="10">
        </label>
        <label>
            Dedupe window (minutes)
            <input type="number" name="news_dedupe_window_minutes" value="{{ settings.get('news_dedupe_window_minutes', '60') }}" min="10">
        </label>
    </div>

    <div class="grid">
        <label>
            <input type="checkbox" name="quiet_mode" role="switch"
                   {{ 'checked' if settings.get('quiet_mode') == 'true' else '' }}>
            Quiet Mode
        </label>
        <label>
            Quiet hours start
            <input type="time" name="quiet_hours_start" value="{{ settings.get('quiet_hours_start', '') }}">
        </label>
        <label>
            Quiet hours end
            <input type="time" name="quiet_hours_end" value="{{ settings.get('quiet_hours_end', '') }}">
        </label>
    </div>

    <h3>Break Length</h3>
    <div class="grid">
        <label>
            Min words
            <input type="number" name="break_min_words" value="{{ settings.get('break_min_words', '15') }}" min="5" max="50">
        </label>
        <label>
            Max words
            <input type="number" name="break_max_words" value="{{ settings.get('break_max_words', '100') }}" min="20" max="300">
        </label>
        <label>
            Max chars
            <input type="number" name="break_max_chars" value="{{ settings.get('break_max_chars', '600') }}" min="100" max="2000">
        </label>
    </div>
    <div class="grid">
        <label>
            Breaking min words
            <input type="number" name="breaking_min_words" value="{{ settings.get('breaking_min_words', '10') }}" min="5" max="30">
        </label>
        <label>
            Breaking max words
            <input type="number" name="breaking_max_words" value="{{ settings.get('breaking_max_words', '50') }}" min="10" max="100">
        </label>
    </div>

    <h3>Video</h3>
    <div class="grid">
        <label>
            Dialog mode
            <select name="dialog_mode">
                <option value="monologue" {{ 'selected' if settings.get('dialog_mode', 'monologue') == 'monologue' else '' }}>Monologue</option>
                <option value="dialog" {{ 'selected' if settings.get('dialog_mode') == 'dialog' else '' }}>Dialog</option>
            </select>
        </label>
        <label>
            Dialog characters
            <input type="text" name="dialog_characters" value="{{ settings.get('dialog_characters', 'alex,maya') }}" placeholder="alex,maya">
        </label>
    </div>

    <button type="submit">Save</button>
</form>
</article>
{% endblock %}
