<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Hermes Radio{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav class="container-fluid">
        <ul>
            <li><strong><a href="/admin/" style="text-decoration:none;color:inherit">Hermes Radio</a></strong></li>
        </ul>
        <details class="nav-toggle">
            <summary>&#9776;</summary>
        </details>
        <ul class="nav-links">
            <li class="nav-group">
                <span class="nav-group-label">Status</span>
                <a href="/admin/" class="{{ 'active' if nav_active == 'dashboard' else '' }}">Dashboard</a>
            </li>
            <li class="nav-sep">|</li>
            <li class="nav-group">
                <span class="nav-group-label">Content</span>
                <a href="/admin/sources" class="{{ 'active' if nav_active == 'sources' else '' }}">Sources</a>
                <a href="/admin/hosts" class="{{ 'active' if nav_active == 'hosts' else '' }}">Hosts</a>
                <a href="/admin/prompts" class="{{ 'active' if nav_active == 'prompts' else '' }}">Prompts</a>
            </li>
            <li class="nav-sep">|</li>
            <li class="nav-group">
                <span class="nav-group-label">Config</span>
                <a href="/admin/rules" class="{{ 'active' if nav_active == 'rules' else '' }}">Rules</a>
                <a href="/admin/cities" class="{{ 'active' if nav_active == 'cities' else '' }}">Cities</a>
                <a href="/admin/tts" class="{{ 'active' if nav_active == 'tts' else '' }}">TTS</a>
            </li>
            <li class="nav-sep">|</li>
            <li class="nav-group">
                <span class="nav-group-label">Tools</span>
                <a href="/admin/music" class="{{ 'active' if nav_active == 'music' else '' }}">Music</a>
                <a href="/admin/breaking" class="{{ 'active' if nav_active == 'breaking' else '' }}">Breaking</a>
                <a href="/admin/logs" class="{{ 'active' if nav_active == 'logs' else '' }}">Logs</a>
            </li>
            <li class="nav-sep">|</li>
            <li><a href="/admin/logout">Logout</a></li>
        </ul>
    </nav>

    <div class="toast-container" id="toast-container"></div>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <footer class="container">
        <small class="text-muted">Hermes Radio</small>
    </footer>

    <script>
    (function() {
        const params = new URLSearchParams(window.location.search);
        const flash = params.get('flash');
        if (flash) {
            const type = params.get('flash_type') || 'info';
            const container = document.getElementById('toast-container');
            const el = document.createElement('div');
            el.className = 'toast toast-' + type;
            el.textContent = flash;
            container.appendChild(el);
            setTimeout(() => el.remove(), 3500);
            params.delete('flash');
            params.delete('flash_type');
            const clean = params.toString();
            const url = window.location.pathname + (clean ? '?' + clean : '');
            history.replaceState(null, '', url);
        }
    })();
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
